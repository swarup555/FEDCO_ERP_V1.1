var $jscomp={scope:{},findInternal:function(a,q,x){a instanceof String&&(a=String(a));for(var A=a.length,C=0;C<A;C++){var Q=a[C];if(q.call(x,Q,C,a))return{i:C,v:Q}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,q,x){if(x.get||x.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[q]=x.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,q,x,A){if(q){x=$jscomp.global;a=a.split(".");for(A=0;A<a.length-1;A++){var C=a[A];C in x||(x[C]={});x=x[C]}a=a[a.length-1];A=x[a];q=q(A);q!=A&&null!=q&&$jscomp.defineProperty(x,a,{configurable:!0,writable:!0,value:q})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,x){return $jscomp.findInternal(this,a,x).v}},"es6-impl","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common","./jsonxml"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){var q=a.jgrid,x=q.jqID,A=a.fn.jqGrid,C=A.getGuiStyles,Q=q.mergeCssClasses,T=q.hasOneFromClasses,fa=q.feedback,ia=q.fullBoolFeedback,N=q.builderFmButon,ca=function(a,q,c){!0===q[0]&&(c="<span class='"+Q("fm-button-icon",c,q[2])+"'></span>","right"===q[1]?a.addClass("fm-button-icon-right").append(c):
a.addClass("fm-button-icon-left").prepend(c))},O=function(a){return C.call(this,"states."+a)},da=function(a){return"&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0)};q.extend({searchGrid:function(n){return this.each(function(){function R(b){J("beforeShow",b)&&(a(t).data("onClose",d.onClose),q.viewModal.call(c,t,{gbox:f,jqm:d.jqModal,overlay:d.overlay,modal:d.modal,overlayClass:d.overlayClass,toTop:d.toTop,onHide:function(a){a.w.remove();a.o&&a.o.remove()}}),J("afterShow",b))}var c=this,
p=a(c),k=c.p;if(c.grid&&null!=k){var d=a.extend(!0,{drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,
onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},A.getGridRes.call(p,"search"),q.search||{},k.searching||{},n||{}),e="fbox_"+k.id,h=d.commonIconClass,m={themodal:"searchmod"+e,modalhead:"searchhd"+e,modalcontent:"searchcnt"+e,resizeAlso:e},
t="#"+x(m.themodal),f=k.gBox,g=k.gView,r=a.each,u=k.postData[d.sFilter],J=function(){var b=a.makeArray(arguments);b.unshift("Search");b.unshift("Filter");b.unshift(d);return fa.apply(c,b)},K=function(){q.hideModal(t,{gb:f,jqm:d.jqModal,onClose:d.onClose,removemodal:d.removemodal})};"string"===typeof u&&(u=""!==a.trim(u)?a.parseJSON(u):void 0);a(t).remove();if(void 0!==a(t)[0])R(a("#fbox_"+x(k.id)));else{var b=a("<div><div id='"+e+"' class='"+C.call(c,"dialog.body","searchFilter")+"' style='overflow:auto'></div></div>").insertBefore(g);
"rtl"===k.direction&&b.attr("dir","rtl");var y="",F="",H,D=!1,v,I=-1,B=a.extend([],k.colModel);v=N.call(c,e+"_search",d.Find,Q(h,d.findDialogIcon),"right");var L=N.call(c,e+"_reset",d.Reset,Q(h,d.resetDialogIcon),"left");d.showQuery&&(y=N.call(c,e+"_query","Query",Q(h,d.queryDialogIcon),"left")+"&#160;");d.searchForAdditionalProperties&&r(k.additionalProperties,function(){var a="string"===typeof this?{name:this}:this;a.label||(a.label=a.name);a.isAddProp=!0;B.push(a)});d.columns.length?(B=d.columns,
I=0,H=B[0].index||B[0].name):r(B,function(a,b){b.label||(b.label=b.isAddProp?b.name:k.colNames[a]);if(!D){var d=void 0===b.search?!0:b.search,e=!0===b.hidden;if(b.searchoptions&&!0===b.searchoptions.searchhidden&&d||d&&!e)D=!0,H=b.index||b.name,I=a}});if(!u&&H||!1===d.multipleSearch)h="eq",0<=I&&B[I].searchoptions&&B[I].searchoptions.sopt?h=B[I].searchoptions.sopt[0]:d.sopt&&d.sopt.length&&(h=d.sopt[0]),u={groupOp:"AND",rules:[{field:H,op:h,data:""}]};D=!1;d.tmplNames&&d.tmplNames.length&&(D=!0,F=
d.tmplLabel,F+="<select class='ui-template'>",F+="<option value='default'>Default</option>",r(d.tmplNames,function(a,b){F+="<option value='"+a+"'>"+b+"</option>"}),F+="</select>");v="<div class='"+C.call(c,"dialog.footer")+"'><table class='EditTable' style='border:0px none;margin-top:5px' id='"+e+"_2'><tbody><tr><td colspan='2'><hr class='"+C.call(c,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+k.direction+"'  style='float:"+("rtl"===k.direction?"right":"left")+
";'>"+L+F+"</td><td class='EditButton EditButton-"+k.direction+"'>"+y+v+"</td></tr></tbody></table></div>";e=x(e);d.gbox=f;d.height="auto";e="#"+e;a(e).jqFilter({columns:B,filter:d.loadDefaults?u:null,showQuery:d.showQuery,errorcheck:d.errorcheck,sopt:d.sopt,groupButton:d.multipleGroup,ruleButtons:d.multipleSearch,afterRedraw:d.afterRedraw,ops:d.odata,cops:k.customSortOperations,operands:d.operands,ajaxSelectOptions:k.ajaxSelectOptions,groupOps:d.groupOps,onChange:function(b,f){b.showQuery&&a(".query",
f).text(f.toUserFriendlyString());ia.call(c,d.afterChange,"jqGridFilterAfterChange",a(e),d,b,f)},direction:k.direction,id:k.id});b.append(v);if(D&&d.tmplFilters&&d.tmplFilters.length)a(".ui-template",b).on("change",function(){var b=a(this).val();"default"===b?a(e).jqFilter("addFilter",u):a(e).jqFilter("addFilter",d.tmplFilters[parseInt(b,10)]);return!1});!0===d.multipleGroup&&(d.multipleSearch=!0);J("onInitialize",a(e));d.layer?q.createModal.call(c,m,b,d,g,a(f)[0],"#"+x(d.layer),{position:"relative"}):
q.createModal.call(c,m,b,d,g,a(f)[0]);(d.searchOnEnter||d.closeOnEscape)&&a(t).keydown(function(b){var f=a(b.target);if(!(!d.searchOnEnter||13!==b.which||f.hasClass("add-group")||f.hasClass("add-rule")||f.hasClass("delete-group")||f.hasClass("delete-rule")||f.hasClass("fm-button")&&f.is("[id$=_query]")))return a(e+"_search").click(),!1;if(d.closeOnEscape&&27===b.which)return a("#"+x(m.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1});if(y)a(e+"_query").on("click",function(){a(".queryresult",
b).toggle();return!1});void 0===d.stringResult&&(d.stringResult=d.multipleSearch);a(e+"_search").on("click",function(){var b={},f="",g,l=a(e);g=l.find(".input-elm");g.filter(":focus")&&(g=g.filter(":focus"));g.change();g=l.jqFilter("filterData");if(d.errorcheck&&(l[0].hideError(),d.showQuery||l.jqFilter("toSQLString"),l[0].p.error))return l[0].showError(),!1;if(d.stringResult||"local"===k.datatype){try{f=window.JSON&&window.JSON.stringify?JSON.stringify(g):xmlJsonClass.toJson(g,"","",!1)}catch(aa){}"string"===
typeof f&&(b[d.sFilter]=f,r([d.sField,d.sValue,d.sOper],function(){b[this]=""}))}else d.multipleSearch?(b[d.sFilter]=g,r([d.sField,d.sValue,d.sOper],function(){b[this]=""})):(b[d.sField]=g.rules[0].field,b[d.sValue]=g.rules[0].data,b[d.sOper]=g.rules[0].op,b[d.sFilter]="");a.extend(k.postData,b);ia.call(c,d.onSearch,"jqGridFilterSearch",k.filters)&&(k.search=!0,p.trigger("reloadGrid",[a.extend({page:1},d.reloadGridSearchOptions||{})]));d.closeAfterSearch&&K();return!1});a(e+"_reset").on("click",function(){var f=
{},g=a(e);k.search=!1;k.resetsearch=!0;!1===d.multipleSearch?f[d.sField]=f[d.sValue]=f[d.sOper]="":f[d.sFilter]="";g[0].resetFilter();D&&a(".ui-template",b).val("default");a.extend(k.postData,f);ia.call(c,d.onReset,"jqGridFilterReset")&&p.trigger("reloadGrid",[a.extend({page:1},d.reloadGridResetOptions||{})]);d.closeAfterReset&&K();return!1});R(a(e));var E=O.call(c,"hover");a(".fm-button:not(."+O.call(c,"disabled").split(" ").join(".")+")",b).hover(function(){a(this).addClass(E)},function(){a(this).removeClass(E)})}}})},
editGridRow:function(n,R){return this.each(function(){function c(){a(D+" > tbody > tr > td .FormElement").each(function(){var w=a(".customelement",this),d=this.name;if(w.length){if(d=w.attr("name"),w=Z[d],void 0!==w&&(w=E[w],w=w.editoptions||{},a.isFunction(w.custom_value))){try{if(l[d]=w.custom_value.call(f,a("#"+x(d),D),"get"),void 0===l[d])throw"e1";}catch(na){"e1"===na?q.info_dialog.call(f,ga,"function 'custom_value' "+b.msg.novalue,b.bClose):q.info_dialog.call(f,ga,na.message,b.bClose)}return!0}}else switch(w=
a(this)[0].type,w){case "checkbox":l[d]=a(this).is(":checked")?a(this).val():a(this).data("offval");break;case "select-one":l[d]=a("option:selected",this).val();break;case "select-multiple":l[d]=a(this).val();l[d]=l[d]?l[d].join(","):"";a("option:selected",this).each(function(b,d){a(d).text()});break;case "date":l[d]=a(this).val();3===String(l[d]).split("-").length&&(w=Z[d],void 0!==w&&(w=E[w],w=w.formatoptions||{},w=w.newformat||J.call(g,"formatter.date.newformat"),l[d]=q.parseDate.call(g[0],"Y-m-d",
l[d],w)));break;default:void 0!==w&&0>a.inArray(w,b.skipPostTypes)&&(l[d]=a(this).val())}});return!0}function p(d,e){var w,l=0,c,ea,z,m;if(b.checkOnSubmit||b.checkOnUpdate)b._savedData={},b._savedData[u+"_id"]=d;var k=r.colModel;if("_empty"===d)a(k).each(function(){w=this.name;ea=a.extend({},this.editoptions||{});(c=a("#"+x(w),e))&&c.length&&null!==c[0]&&(z="","custom"===this.edittype&&a.isFunction(ea.custom_value)?ea.custom_value.call(f,c,"set",z):ea.defaultValue?(z=a.isFunction(ea.defaultValue)?
ea.defaultValue.call(f):ea.defaultValue,"checkbox"===c[0].type?(m=z.toLowerCase(),0>m.search(/(false|f|0|no|n|off|undefined)/i)&&""!==m?(c[0].checked=!0,c[0].defaultChecked=!0,c[0].value=z):(c[0].checked=!1,c[0].defaultChecked=!1)):c.val(z)):"checkbox"===c[0].type?(c[0].checked=!1,c[0].defaultChecked=!1,z=a(c).data("offval")):c[0].type&&"select"===c[0].type.substr(0,6)?c[0].selectedIndex=0:c.val(z),!0===b.checkOnSubmit||b.checkOnUpdate)&&(b._savedData[w]=z)}),a("#id_g",e).val(d);else{var p=A.getInd.call(g,
d,!0);p&&(a(p.cells).filter("td[role=gridcell]").each(function(g){var c;w=k[g].name;if("cb"!==w&&"subgrid"!==w&&"rn"!==w&&!0===k[g].editable){try{c=a.unformat.call(f,a(this),{rowId:d,colModel:k[g]},g)}catch(ja){c="textarea"===k[g].edittype?a(this).text():a(this).html()}r.autoEncodeOnEdit&&(c=q.oldDecodePostedData(c));if(!0===b.checkOnSubmit||b.checkOnUpdate)b._savedData[w]=c;w="#"+x(w);switch(k[g].edittype){case "password":case "text":case "button":case "image":case "textarea":da(c)&&(c="");a(w,e).val(c);
break;case "select":var z=c.split(","),z=a.map(z,function(b){return a.trim(b)});a(w+" option",e).each(function(){var b=a(this),d=a.trim(b.val()),b=a.trim(b.text());k[g].editoptions.multiple||a.trim(c)!==b&&z[0]!==b&&z[0]!==d?k[g].editoptions.multiple?-1<a.inArray(b,z)||-1<a.inArray(d,z)?this.selected=!0:this.selected=!1:this.selected=!1:this.selected=!0});break;case "checkbox":c=String(c);k[g].editoptions&&k[g].editoptions.value?c=k[g].editoptions.value.split(":")[0]===c:(c=c.toLowerCase(),c=0>c.search(/(false|f|0|no|n|off|undefined)/i)&&
""!==c);a(w,e).prop({checked:c,defaultChecked:c});break;case "custom":try{if(k[g].editoptions&&a.isFunction(k[g].editoptions.custom_value))k[g].editoptions.custom_value.call(f,a(w,e),"set",c);else throw"e1";}catch(ja){"e1"===ja?q.info_dialog.call(f,ga,"function 'custom_value' "+b.msg.nodefined,b.bClose):q.info_dialog.call(f,ga,ja.message,b.bClose)}}l++}}),0<l&&a("#id_g",D).val(d))}}function k(){var d=b.url||r.editurl;a.each(E,function(b,w){var c=w.name,e=l[c];"date"!==w.formatter||null!=w.formatoptions&&
!0===w.formatoptions.sendFormatted||(l[c]=a.unformat.date.call(f,e,w));"clientArray"!==d&&w.editoptions&&!0===w.editoptions.NullIfEmpty&&l.hasOwnProperty(c)&&""===e&&(l[c]="null")})}function d(){var d=[!0,"",""],c=d,e={},z=r.prmNames,m,B,h,x,t,M,C=A.getInd.call(g,n),L=!1===C?null:f.rows[C];(M=g.triggerHandler("jqGridAddEditBeforeCheckValues",[a(y),G]))&&"object"===typeof M&&(l=M);C=!1===C?-1:C;a.isFunction(b.beforeCheckValues)&&(M=b.beforeCheckValues.call(f,l,a(y),G))&&"object"===typeof M&&(l=M);
for(h in l)if(l.hasOwnProperty(h)){M=r.iColByName[h];c=q.checkValues.call(f,l[h],h,void 0,void 0,{oldValue:"_empty"===n?null:A.getCell.call(g,n,M),newValue:l[h],cmName:h,rowid:n,cm:E[M],iCol:M,iRow:C,tr:L,td:null==L?null:L.cells[M],mode:"_empty"===n?"addForm":"editForm"});if(null==c||!0===c)c=d;if(!1===c[0])break}k();if(c[0]){e=g.triggerHandler("jqGridAddEditClickSubmit",[b,l,G]);void 0===e&&a.isFunction(b.onclickSubmit)&&(e=b.onclickSubmit.call(f,b,l,G)||{});c=g.triggerHandler("jqGridAddEditBeforeSubmit",
[l,a(y),G]);if(null==c||!0===c)c=d;c[0]&&a.isFunction(b.beforeSubmit)&&(c=b.beforeSubmit.call(f,l,a(y),G),null==c||!0===c)&&(c=d)}if(c[0]&&!b.processing){b.processing=!0;a("#sData",v).addClass(oa);h=b.url||r.editurl;B=z.oper;m="clientArray"===h&&!1!==r.keyName?r.keyName:z.id;l[B]="_empty"===a.trim(l[u+"_id"])?z.addoper:z.editoper;l[B]!==z.addoper?l[m]=l[u+"_id"]:void 0===l[m]&&(l[m]=l[u+"_id"]);delete l[u+"_id"];l=a.extend(l,b.editData,e);if(!0===r.treeGrid)for(t in l[B]===z.addoper&&(x=r.selrow,
l["adjacency"===r.treeGridModel?r.treeReader.parent_id_field:"parent_id"]=x),r.treeReader)r.treeReader.hasOwnProperty(t)&&(e=r.treeReader[t],!l.hasOwnProperty(e)||l[B]===z.addoper&&"parent_id_field"===t||delete l[e]);l[m]=q.stripPref(r.idPrefix,l[m]);r.autoEncodeOnEdit&&a.each(l,function(b,c){a.isFunction(c)||(l[b]=q.oldEncodePostedData(c))});t=a.extend({url:a.isFunction(h)?h.call(f,l[m],G,l,b):h,type:a.isFunction(b.mtype)?b.mtype.call(f,G,b,l[m],l):b.mtype,data:q.serializeFeedback.call(f,a.isFunction(b.serializeEditData)?
b.serializeEditData:r.serializeEditData,"jqGridAddEditSerializeEditData",l),complete:function(e,w){g.jqGrid("progressBar",{method:"hide",loadtype:b.saveui});a("#sData",v).removeClass(oa);l[m]=a("#id_g",D).val();if(300<=e.status&&304!==e.status||0===e.status&&4===e.readyState)c[0]=!1,c[1]=g.triggerHandler("jqGridAddEditErrorTextFormat",[e,G]),a.isFunction(b.errorTextFormat)?c[1]=b.errorTextFormat.call(f,e,G):c[1]=w+" Status: '"+e.statusText+"'. Error code: "+e.status;else{c=g.triggerHandler("jqGridAddEditAfterSubmit",
[e,l,G]);if(null==c||!0===c)c=d;c[0]&&a.isFunction(b.afterSubmit)&&(c=b.afterSubmit.call(f,e,l,G),null==c||!0===c)&&(c=d)}if(!1===c[0])a("#FormError>td",D).html(c[1]),a("#FormError",D).show();else{r.autoEncodeOnEdit&&a.each(l,function(a,b){l[a]=q.oldDecodePostedData(b)});var k=[a.extend({},b.reloadGridOptions||{})];l[B]===z.addoper?(c[2]||(c[2]=q.randId()),null==l[m]||"_empty"===l[m]||l[B]===z.addoper?l[m]=c[2]:c[2]=l[m],b.reloadAfterSubmit?g.trigger("reloadGrid",k):!0===r.treeGrid?A.addChildNode.call(g,
c[2],x,l):A.addRowData.call(g,c[2],l,b.addedrow),b.closeAfterAdd?(!0!==r.treeGrid&&K.call(g,c[2]),S()):b.clearAfterAdd&&p("_empty",y)):(b.reloadAfterSubmit?(g.trigger("reloadGrid",k),b.closeAfterEdit||setTimeout(function(){K.call(g,l[m])},1E3)):!0===r.treeGrid?A.setTreeRow.call(g,l[m],l):A.setRowData.call(g,l[m],l),b.closeAfterEdit&&S());if(a.isFunction(b.afterComplete)){var h=e;setTimeout(function(){g.triggerHandler("jqGridAddEditAfterComplete",[h,l,a(y),G]);b.afterComplete.call(f,h,l,a(y),G);h=
null},50)}if(b.checkOnSubmit||b.checkOnUpdate)if(a(y).data("disabled",!1),"_empty"!==b._savedData[u+"_id"])for(var n in b._savedData)b._savedData.hasOwnProperty(n)&&l[n]&&(b._savedData[n]=l[n])}b.processing=!1;try{a(":input:visible",y)[0].focus()}catch(sa){}}},q.ajaxOptions,b.ajaxEditOptions);t.url||b.useDataProxy||(a.isFunction(r.dataProxy)?b.useDataProxy=!0:(c[0]=!1,c[1]+=" "+q.errors.nourl));c[0]&&(g.jqGrid("progressBar",{method:"show",loadtype:b.saveui,htmlcontent:b.savetext}),b.useDataProxy?
(e=r.dataProxy.call(f,t,"set_"+u),void 0===e&&(e=[!0,""]),!1===e[0]?(c[0]=!1,c[1]=e[1]||"Error deleting the selected row!"):(t.data.oper===z.addoper&&b.closeAfterAdd&&S(),t.data.oper===z.editoper&&b.closeAfterEdit&&S())):"clientArray"===t.url?(b.reloadAfterSubmit=!1,l=t.data,t.complete({status:200,statusText:""},"")):a.ajax(t))}!1===c[0]&&(a("#FormError>td",D).html(c[1]),a("#FormError",D).show())}function e(a,b){var c=!1,d;for(d in a)if(a.hasOwnProperty(d)&&String(a[d])!==String(b[d])){c=!0;break}return c}
function h(){var d=!0;a("#FormError",D).hide();b.checkOnUpdate&&(l={},c(),aa=e(l,b._savedData))&&(a(y).data("disabled",!0),a(".confirm",B).show(),d=!1);return d}function m(b,c){var d=c[1].length-1;0===b?a("#pData",v).addClass(V):void 0!==c[1][b-1]&&T(a("#"+x(c[1][b-1])),V)?a("#pData",v).addClass(V):a("#pData",v).removeClass(V);b===d?a("#nData",v).addClass(V):void 0!==c[1][b+1]&&T(a("#"+x(c[1][b+1])),V)?a("#nData",v).addClass(V):a("#nData",v).removeClass(V)}function t(){var b=A.getDataIDs.call(g),
c=a("#id_g",D).val();return[a.inArray(c,b),b]}var f=this,g=a(f),r=f.p;if(f.grid&&null!=r&&n){var u=r.id,J=A.getGridRes,K=A.setSelection,b=a.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,
editData:{},closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:C.call(this,"overlay"),removemodal:!0,skipPostTypes:["image","file"],saveui:"enable",savetext:J.call(g,"defaults.savetext")||"Saving..."},J.call(g,"edit"),q.edit,r.formEditing||{},R||{}),y="FrmGrid_"+u,F=y,H="TblGrid_"+u,D="#"+x(H),v=D+"_2",I={themodal:"editmod"+
u,modalhead:"edithd"+u,modalcontent:"editcnt"+u,resizeAlso:y},B="#"+x(I.themodal),L=r.gBox,E=r.colModel,Z=r.iColByName,P=1,U=0,l,aa,G,z=b.commonIconClass,S=function(){q.hideModal(B,{gb:L,jqm:b.jqModal,onClose:b.onClose,removemodal:b.removemodal})},ga=J.call(g,"errors.errcap"),Y=function(){var c=a.makeArray(arguments);c.unshift("");c.unshift("AddEdit");c.unshift(b);return fa.apply(f,c)},pa=O.call(f,"hover"),V=O.call(f,"disabled"),qa=O.call(f,"select"),oa=O.call(f,"active"),W=O.call(f,"error");a(B).remove();
y="#"+x(y);"new"===n?(n="_empty",G="add",b.caption=b.addCaption):(b.caption=b.editCaption,G="edit");var X=!0;!b.checkOnUpdate||!0!==b.jqModal&&void 0!==b.jqModal||b.modal||(X=!1);var M=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px",ba=isNaN(b.datawidth)?b.datawidth:b.datawidth+"px",F=a("<form name='FormPost' id='"+F+"' class='FormGrid' onSubmit='return false;' style='width:"+ba+";overflow:auto;position:relative;height:"+M+";'></form>").data("disabled",!1),ha=a("<table id='"+H+"' class='EditTable'><tbody></tbody></table>");
a(E).each(function(){var a=this.formoptions;P=Math.max(P,a?a.colpos||0:0);U=Math.max(U,a?a.rowpos||0:0)});a(F).append(ha);W=a("<tr id='FormError' style='display:none'><td class='"+W+"' colspan='"+2*P+"'>&#160;</td></tr>");W[0].rp=0;a(ha).append(W);W=a("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*P+"'>"+(b.topinfo||"&#160;")+"</td></tr>");W[0].rp=0;a(ha).append(W);if(Y("beforeInitData",F,G)){(function(){var b=q.detectRowEditing.call(f,n);if(null!=b)if("inlineEditing"===
b.mode)A.restoreRow.call(g,n);else{var b=b.savedRow,c=f.rows[b.id];A.restoreCell.call(g,b.id,b.ic);a(c.cells[b.ic]).removeClass("edit-cell "+qa);a(c).addClass(qa).attr({"aria-selected":"true",tabindex:"0"})}})();M=(W="rtl"===r.direction?!0:!1)?"nData":"pData";ba=W?"pData":"nData";(function(c,d,e){var z=0,l=[],w=!1,m="",k;for(k=1;k<=e;k++)m+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";"_empty"!==c&&(w=A.getInd.call(g,c));a(E).each(function(g){var k=this.name,h,p,n,B,t;h=this.editable;
var v=!1,M=!1;t="_empty"===c?"addForm":"editForm";a.isFunction(h)&&(h=h.call(f,{rowid:c,iCol:g,iRow:w,cmName:k,cm:this,mode:t}));B=(this.editrules&&!0===this.editrules.edithidden?0:!0===this.hidden||"hidden"===h)?"style='display:none'":"";switch(String(h).toLowerCase()){case "hidden":h=!0;break;case "disabled":v=h=!0;break;case "readonly":M=h=!0}if("cb"!==k&&"subgrid"!==k&&!0===h&&"rn"!==k){if(!1===w)n="";else{h=a(f.rows[w].cells[g]);try{n=a.unformat.call(f,h,{rowId:c,colModel:this},g)}catch(ta){n=
this.edittype&&"textarea"===this.edittype?h.text():h.html()}da(n)&&(n="")}h=a.extend({},this.editoptions||{},{id:k,name:k,rowId:c,mode:t,cm:this,iCol:g});var u=a.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),A=parseInt(u.rowpos,10)||z+1,S=parseInt(2*(parseInt(u.colpos,10)||1),10);"_empty"===c&&h.defaultValue&&(n=a.isFunction(h.defaultValue)?h.defaultValue.call(f):h.defaultValue);this.edittype||(this.edittype="text");r.autoEncodeOnEdit&&(n=q.oldDecodePostedData(n));
t=q.createEl.call(f,this.edittype,h,n,!1,a.extend({},q.ajaxOptions,r.ajaxSelectOptions||{}));if(b.checkOnSubmit||b.checkOnUpdate)b._savedData[k]=n;a(t).addClass("FormElement");-1<a.inArray(this.edittype,["text","textarea","checkbox","password","select"])&&a(t).addClass(C.call(f,"dialog.dataField"));p=a(d).find("tr[data-rowpos="+A+"]");if(u.rowabove){var L=a("<tr><td class='contentinfo' colspan='"+2*e+"'>"+u.rowcontent+"</td></tr>");a(d).append(L);L[0].rp=A}0===p.length&&(p=a("<tr "+B+" data-rowpos='"+
A+"'></tr>").addClass("FormData").attr("id","tr_"+k),a(p).append(m),a(d).append(p),p[0].rp=A);B=a("td:eq("+(S-2)+")",p[0]);p=a("td:eq("+(S-1)+")",p[0]);B.html(void 0===u.label?r.colNames[g]:u.label||"&#160;");p[da(p.html())?"html":"append"](u.elmprefix).append(t).append(u.elmsuffix);v?(B.addClass(V),p.addClass(V),a(t).prop("readonly",!0),a(t).prop("disabled",!0)):M&&a(t).prop("readonly",!0);"custom"===this.edittype&&a.isFunction(h.custom_value)&&h.custom_value.call(f,a("#"+x(k),y),"set",n);q.bindEv.call(f,
t,h);l[z]=g;z++}});0<z&&(k=a("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*e-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+u+"_id' value='"+c+"'/></td></tr>"),k[0].rp=z+999,a(d).append(k),b.checkOnSubmit||b.checkOnUpdate)&&(b._savedData[u+"_id"]=c);return l})(n,ha,P);var M=N.call(f,M,"",Q(z,b.prevIcon),"","left"),ba=N.call(f,ba,"",Q(z,b.nextIcon),"","right"),ka=N.call(f,"sData",b.bSubmit),la=N.call(f,"cData",b.bCancel),
H="<div class='"+C.call(f,"dialog.footer")+"'><table class='EditTable' id='"+H+"_2'><tbody><tr><td colspan='2'><hr class='"+C.call(f,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+r.direction+"'>"+(W?ba+M:M+ba)+"</td><td class='EditButton EditButton-"+r.direction+"'>"+ka+"&#160;"+la+"</td></tr>",H=H+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(b.bottominfo||"&#160;")+"</td></tr>"),H=H+"</tbody></table></div>";if(0<
U){var ma=[];a.each(a(ha)[0].rows,function(a,b){ma[a]=b});ma.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(ma,function(b,c){a("tbody",ha).append(c)})}b.gbox=L;var ra=!1;!0===b.closeOnEscape&&(b.closeOnEscape=!1,ra=!0);H=a("<div></div>").append(a("<div class='"+C.call(f,"dialog.body")+"'></div>").append(F)).append(H);q.createModal.call(f,I,H,b,r.gView,a(L)[0]);b.topinfo&&a(".tinfo",D).show();b.bottominfo&&a(".binfo",v).show();H=H=null;a(B).keydown(function(c){var d=(c.target.tagName||
"").toUpperCase(),e,g;if(!0===a(y).data("disabled"))return!1;if(13===c.which&&"TEXTAREA"!==d){e=a(v).find(":focus");g=e.attr("id");if(0<e.length&&0<=a.inArray(g,["pData","nData","cData"]))return e.trigger("click"),!1;if(!0===b.savekey[0]&&13===b.savekey[1])return a("#sData",v).trigger("click"),!1}if(!0===b.savekey[0]&&c.which===b.savekey[1]&&"TEXTAREA"!==d)return a("#sData",v).trigger("click"),!1;if(27===c.which){if(!h())return!1;ra&&S();return!1}if(!0===b.navkeys[0]){if("_empty"===a("#id_g",D).val())return!0;
if(c.which===b.navkeys[1])return a("#pData",v).trigger("click"),!1;if(c.which===b.navkeys[2])return a("#nData",v).trigger("click"),!1}});b.checkOnUpdate&&(a("a.ui-jqdialog-titlebar-close span",B).removeClass("jqmClose"),a("a.ui-jqdialog-titlebar-close",B).off("click").click(function(){if(!h())return!1;S();return!1}));ca(a("#sData",v),b.saveicon,z);ca(a("#cData",v),b.closeicon,z);if(b.checkOnSubmit||b.checkOnUpdate)ka=N.call(f,"sNew",b.bYes),ba=N.call(f,"nNew",b.bNo),la=N.call(f,"cNew",b.bExit),I=
b.zIndex||999,I++,a("<div class='"+b.overlayClass+" jqgrid-overlay confirm' style='z-index:"+I+";display:none;'>&#160;</div><div class='"+C.call(f,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(I+1)+"'>"+b.saveData+"<br/><br/>"+ka+ba+la+"</div>").insertAfter(y),a("#sNew",B).click(function(){d();a(y).data("disabled",!1);a(".confirm",B).hide();return!1}),a("#nNew",B).click(function(){a(".confirm",B).hide();a(y).data("disabled",!1);setTimeout(function(){a(":input:visible",y)[0].focus()},
0);return!1}),a("#cNew",B).click(function(){a(".confirm",B).hide();a(y).data("disabled",!1);S();return!1});Y("onInitializeForm",a(y),G);"_empty"!==n&&b.viewPagerButtons?a("#pData,#nData",v).show():a("#pData,#nData",v).hide();Y("beforeShowForm",a(y),G);a(B).data("onClose",b.onClose);q.viewModal.call(f,B,{gbox:L,jqm:b.jqModal,overlay:b.overlay,modal:b.modal,overlayClass:b.overlayClass,toTop:b.toTop,onHide:function(a){a.w.remove();a.o&&a.o.remove()}});X||a("."+x(b.overlayClass)).click(function(){if(!h())return!1;
S();return!1});a(".fm-button",B).hover(function(){a(this).addClass(pa)},function(){a(this).removeClass(pa)});a("#sData",v).click(function(){l={};a("#FormError",D).hide();c();"_empty"===l[u+"_id"]?d():!0===b.checkOnSubmit?(aa=e(l,b._savedData))?(a(y).data("disabled",!0),a(".confirm",B).show()):d():d();return!1});a("#cData",v).click(function(){if(!h())return!1;S();return!1});a("#nData",v).click(function(){if(!h())return!1;a("#FormError",D).hide();var b=t();b[0]=parseInt(b[0],10);if(-1!==b[0]&&b[1][b[0]+
1]){if(!Y("onclickPgButtons","next",a(y),b[1][b[0]]))return!1;p(b[1][b[0]+1],y);K.call(g,b[1][b[0]+1]);Y("afterclickPgButtons","next",a(y),b[1][b[0]+1]);m(b[0]+1,b)}return!1});a("#pData",v).click(function(){if(!h())return!1;a("#FormError",D).hide();var b=t();if(-1!==b[0]&&b[1][b[0]-1]){if(!Y("onclickPgButtons","prev",a(y),b[1][b[0]])||T(a("#"+x(b[1][b[0]-1])),V))return!1;p(b[1][b[0]-1],y);K.call(g,b[1][b[0]-1]);Y("afterclickPgButtons","prev",a(y),b[1][b[0]-1]);m(b[0]-1,b)}return!1});Y("afterShowForm",
a(y),G);X=t();m(X[0],X)}}})},viewGridRow:function(n,R){return this.each(function(){function c(){!0!==f.closeOnEscape&&!0!==f.navkeys[0]||setTimeout(function(){a("#cData").focus()},0)}function p(b){var c,d,g=0,f=A.getInd.call(h,b,!0),z;f&&(a("td",f).each(function(b){z=H[b];c=z.name;d=z.editrules&&!0===z.editrules.edithidden?!1:!0===z.hidden?!0:!1;"cb"!==c&&"subgrid"!==c&&"rn"!==c&&(c=x("v_"+c),a("#"+c+" span",r).html(q.getDataFieldOfCell.call(e,f,b).html()),d&&a("#"+c,r).parents("tr:first").hide(),
g++)}),0<g&&a("#id_g",r).val(b))}function k(b,c){var d=c[1].length-1;0===b?a("#pData",u).addClass(E):void 0!==c[1][b-1]&&T(a("#"+x(c[1][b-1])),E)?a("#pData",u).addClass(E):a("#pData",u).removeClass(E);b===d?a("#nData",u).addClass(E):void 0!==c[1][b+1]&&T(a("#"+x(c[1][b+1])),E)?a("#nData",u).addClass(E):a("#nData",u).removeClass(E)}function d(){var b=A.getDataIDs.call(h),c=a("#id_g",r).val();return[a.inArray(c,b),b]}var e=this,h=a(e),m=e.p;if(e.grid&&null!=m&&n){var t=m.id,f=a.extend(!0,{top:0,left:0,
width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"",navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,removemodal:!0},A.getGridRes.call(h,"view"),q.view||{},m.formViewing||{},R||{}),g="#ViewGrid_"+x(t),r="#ViewTbl_"+x(t),u=r+"_2",J="ViewGrid_"+t,K="ViewTbl_"+t,b=f.commonIconClass,t={themodal:"viewmod"+t,modalhead:"viewhd"+t,modalcontent:"viewcnt"+t,resizeAlso:J},y="#"+x(t.themodal),F=m.gBox,H=m.colModel,
D=1,v=0,I=function(){var b=a.makeArray(arguments);b.unshift("");b.unshift("View");b.unshift(f);return fa.apply(e,b)},B=function(){q.hideModal(y,{gb:F,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal})},L=O.call(e,"hover"),E=O.call(e,"disabled"),Z=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",P=isNaN(f.datawidth)?f.datawidth:f.datawidth+"px",J=a("<div class='"+C.call(e,"dialog.body")+"'><form name='FormPost' id='"+J+"' class='FormGrid' style='width:"+P+";overflow:auto;position:relative;height:"+
Z+";'></form></div>"),Z=J.children("form.FormGrid"),U=a("<table id='"+K+"' class='EditTable'><tbody></tbody></table>");a(y).remove();a(H).each(function(){var a=this.formoptions;D=Math.max(D,a?a.colpos||0:0);v=Math.max(v,a?a.rowpos||0:0)});Z.append(U);if(I("beforeInitData",Z)){(function(b,c,d){var g,l,k,z=0,p,n,B=[],t=A.getInd.call(h,b),r,u=C.call(e,"dialog.viewData"),v=C.call(e,"dialog.viewLabel");r=String(f.labelswidth)+(!f.labelswidth||isNaN(f.labelswidth)?"":"px");var x="<td class='"+C.call(e,
"dialog.viewCellLabel","CaptionTD form-view-label")+(r?"' style='width:"+r+";":"")+"'>&#160;</td><td class='"+C.call(e,"dialog.viewCellData","DataTD form-view-data")+"'>&#160;</td>",y="",L=["integer","number","currency"],w=0,E=0,D,F,G;for(r=0;r<d;r++)y+=x;a(H).each(function(){(l=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)||"right"!==this.align||(this.formatter&&-1!==a.inArray(this.formatter,L)?w=Math.max(w,parseInt(this.width,10)):E=Math.max(E,parseInt(this.width,10)))});
D=0!==w?w:0!==E?E:0;a(H).each(function(b){g=this.name;F=!1;n=(l=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";G="boolean"!==typeof this.viewable?!0:this.viewable;if("cb"!==g&&"subgrid"!==g&&"rn"!==g&&G){p=!1===t?"":q.getDataFieldOfCell.call(e,e.rows[t],b).html();F="right"===this.align&&0!==D?!0:!1;var f=a.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),h=parseInt(f.rowpos,10)||z+1,r=parseInt(2*(parseInt(f.colpos,10)||1),10);if(f.rowabove){var w=
a("<tr><td class='contentinfo' colspan='"+2*d+"'>"+f.rowcontent+"</td></tr>");a(c).append(w);w[0].rp=h}k=a(c).find("tr[data-rowpos="+h+"]");0===k.length&&(k=a("<tr "+n+" data-rowpos='"+h+"'></tr>").addClass("FormData").attr("id","trv_"+g),k.append(y),a(c).append(k),k[0].rp=h);f=void 0===f.label?m.colNames[b]:f.label;h=a("td:eq("+(r-1)+")",k[0]);a("td:eq("+(r-2)+")",k[0]).html("<label for='"+g+"'"+(v?" class='"+v+"'>":">")+(f||"&nbsp;")+"</label>");h[da(h.html())?"html":"append"]("<span id='"+g+"'"+
(u?" class='"+u+"'>":">")+(p||"&nbsp;")+"</span>").attr("id","v_"+g);F&&a("td:eq("+(r-1)+") span",k[0]).css({"text-align":"right",width:D+"px"});B[z]=b;z++}});0<z&&(b=a("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*d-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+b+"'/></td></tr>"),b[0].rp=z+99,a(c).append(b));return B})(n,U,D);var l=(Z="rtl"===m.direction?!0:!1)?"pData":"nData",P=N.call(e,Z?"nData":"pData",
"",Q(b,f.prevIcon),"","left"),l=N.call(e,l,"",Q(b,f.nextIcon),"","right"),aa=N.call(e,"cData",f.bClose);if(0<v){var G=[];a.each(a(U)[0].rows,function(a,b){G[a]=b});G.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(G,function(b,c){a("tbody",U).append(c)})}f.gbox=F;K=a("<div></div>").append(J).append("<div class='"+C.call(e,"dialog.footer")+"'><table border='0' class='EditTable' id='"+K+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+m.direction+"' width='"+(f.labelswidth||
"auto")+"'>"+(Z?l+P:P+l)+"</td><td class='EditButton EditButton-"+m.direction+"'>"+aa+"</td></tr></tbody></table></div>");q.createModal.call(e,t,K,f,m.gView,a(m.gView)[0]);f.viewPagerButtons||a("#pData, #nData",u).hide();K=null;a(y).keydown(function(b){var c,d;if(!0===a(g).data("disabled"))return!1;if(13===b.which&&(c=a(u).find(":focus"),d=c.attr("id"),0<c.length&&0<=a.inArray(d,["pData","nData","cData"])))return c.trigger("click"),!1;if(27===b.which)return f.closeOnEscape&&B(),!1;if(!0===f.navkeys[0]){if(b.which===
f.navkeys[1])return a("#pData",u).trigger("click"),!1;if(b.which===f.navkeys[2])return a("#nData",u).trigger("click"),!1}});ca(a("#cData",u),f.closeicon,b);I("beforeShowForm",a(g));q.viewModal.call(e,y,{gbox:F,jqm:f.jqModal,overlay:f.overlay,toTop:f.toTop,modal:f.modal,onHide:function(a){a.w.remove();a.o&&a.o.remove()}});a(".fm-button:not(."+E.split(" ").join(".")+")",u).hover(function(){a(this).addClass(L)},function(){a(this).removeClass(L)});c();a("#cData",u).click(function(){B();return!1});a("#nData",
u).click(function(){a("#FormError",r).hide();var b=d();b[0]=parseInt(b[0],10);if(-1!==b[0]&&b[1][b[0]+1]){if(!I("onclickPgButtons","next",a(g),b[1][b[0]]))return!1;p(b[1][b[0]+1]);A.setSelection.call(h,b[1][b[0]+1]);I("afterclickPgButtons","next",a(g),b[1][b[0]+1]);k(b[0]+1,b)}c();return!1});a("#pData",u).click(function(){a("#FormError",r).hide();var b=d();if(-1!==b[0]&&b[1][b[0]-1]){if(!I("onclickPgButtons","prev",a(g),b[1][b[0]]))return!1;p(b[1][b[0]-1]);A.setSelection.call(h,b[1][b[0]-1]);I("afterclickPgButtons",
"prev",a(g),b[1][b[0]-1]);k(b[0]-1,b)}c();return!1});b=d();k(b[0],b)}}})},delGridRow:function(n,R){return this.each(function(){var c=this,p=c.p,k=a(c);if(c.grid&&null!=p&&n){var d=p.id,e=a.extend(!0,{top:0,left:0,width:240,removemodal:!0,height:"auto",dataheight:"auto",datawidth:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},onClose:null,ajaxDelOptions:{},
processing:!1,serializeDelData:null,useDataProxy:!1},A.getGridRes.call(k,"del"),q.del||{},p.formDeleting||{},R||{}),h="DelTbl_"+d,m="#DelTbl_"+x(d),t,f,g,r,u={themodal:"delmod"+d,modalhead:"delhd"+d,modalcontent:"delcnt"+d,resizeAlso:h},J="#"+x(u.themodal),K=p.gBox,b=e.commonIconClass,y=function(){var b=a.makeArray(arguments);b.unshift("");b.unshift("Delete");b.unshift(e);return fa.apply(c,b)},F=O.call(c,"hover"),H=O.call(c,"active"),D=O.call(c,"error");a.isArray(n)||(n=[String(n)]);if(void 0!==a(J)[0]){if(!y("beforeInitData",
a(m)))return;a("#DelData>td",m).text(n.join()).data("rowids",n);a("#DelError",m).hide();!0===e.processing&&(e.processing=!1,a("#dData",m).removeClass(H));y("beforeShowForm",a(m));q.viewModal.call(c,J,{gbox:K,jqm:e.jqModal,jqM:!1,overlay:e.overlay,toTop:e.toTop,modal:e.modal})}else{var v=isNaN(e.dataheight)?e.dataheight:e.dataheight+"px",I=isNaN(e.datawidth)?e.datawidth:e.datawidth+"px",v="<div class='"+C.call(c,"dialog.body")+"'><div id='"+h+"' class='formdata' style='width:"+I+";overflow:auto;position:relative;height:"+
v+";'>",v=v+"<table class='DelTable'><tbody>"+("<tr id='DelError' style='display:none'><td class='"+D+"'></td></tr>")+("<tr id='DelData' style='display:none'><td >"+n.join()+"</td></tr>"),v=v+("<tr><td class='delmsg'>"+e.msg+"</td></tr>"),v=v+"</tbody></table></div></div>",D=N.call(c,"dData",e.bSubmit),I=N.call(c,"eData",e.bCancel),v=v+("<div class='"+C.call(c,"dialog.footer")+"'><table class='EditTable' id='"+h+"_2'><tbody><tr><td><hr class='"+C.call(c,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+
p.direction+"'>"+D+"&#160;"+I+"</td></tr></tbody></table></div>");e.gbox=K;q.createModal.call(c,u,v,e,p.gView,a(p.gView)[0]);a("#DelData>td",m).data("rowids",n);if(!y("beforeInitData",a(v)))return;a(".fm-button",m+"_2").hover(function(){a(this).addClass(F)},function(){a(this).removeClass(F)});ca(a("#dData",m+"_2"),e.delicon,b);ca(a("#eData",m+"_2"),e.cancelicon,b);a("#dData",m+"_2").click(function(){var b=[!0,""],h,n=a("#DelData>td",m),u=n.text(),v=n.data("rowids"),n={};a.isFunction(e.onclickSubmit)&&
(n=e.onclickSubmit.call(c,e,u)||{});a.isFunction(e.beforeSubmit)&&(b=e.beforeSubmit.call(c,u)||b);if(b[0]&&!e.processing){e.processing=!0;g=p.prmNames;t=a.extend({},e.delData,n);r=g.oper;t[r]=g.deloper;f=g.id;u=v.slice();if(!u.length)return!1;for(h in u)u.hasOwnProperty(h)&&(u[h]=q.stripPref(p.idPrefix,u[h]));t[f]=u.join();a(this).addClass(H);h=e.url||p.editurl;h=a.extend({url:a.isFunction(h)?h.call(c,t[f],t,e):h,type:e.mtype,data:a.isFunction(e.serializeDelData)?e.serializeDelData.call(c,t):t,complete:function(d,
g){var f;a("#dData",m+"_2").removeClass(H);300<=d.status&&304!==d.status||0===d.status&&4===d.readyState?(b[0]=!1,a.isFunction(e.errorTextFormat)?b[1]=e.errorTextFormat.call(c,d):b[1]=g+" Status: '"+d.statusText+"'. Error code: "+d.status):a.isFunction(e.afterSubmit)&&(b=e.afterSubmit.call(c,d,t)||[!0]);if(!1===b[0])a("#DelError>td",m).html(b[1]),a("#DelError",m).show();else{if("local"===p.datatype||!0===p.treeGrid||!e.reloadAfterSubmit)if(!0===p.treeGrid)try{A.delTreeNode.call(k,v[0])}catch(G){}else for(v=
v.slice(),f=0;f<v.length;f++)A.delRowData.call(k,v[f]);e.reloadAfterSubmit&&k.trigger("reloadGrid",[a.extend({},e.reloadGridOptions||{})]);setTimeout(function(){y("afterComplete",d,u,a(m))},50)}e.processing=!1;b[0]&&q.hideModal(J,{gb:K,jqm:e.jqModal,onClose:e.onClose,removemodal:e.removemodal})}},q.ajaxOptions,e.ajaxDelOptions);h.url||e.useDataProxy||(a.isFunction(p.dataProxy)?e.useDataProxy=!0:(b[0]=!1,b[1]+=" "+q.errors.nourl));b[0]&&(e.useDataProxy?(h=p.dataProxy.call(c,h,"del_"+d),void 0===h&&
(h=[!0,""]),!1===h[0]?(b[0]=!1,b[1]=h[1]||"Error deleting the selected row!"):q.hideModal(J,{gb:K,jqm:e.jqModal,onClose:e.onClose,removemodal:e.removemodal})):"clientArray"===h.url?(t=h.data,h.complete({status:200,statusText:""},"")):a.ajax(h))}!1===b[0]&&(a("#DelError>td",m).html(b[1]),a("#DelError",m).show());return!1});a("#eData",m+"_2").click(function(){q.hideModal(J,{gb:K,jqm:e.jqModal,onClose:e.onClose,removemodal:e.removemodal});return!1});y("beforeShowForm",a(m));q.viewModal.call(c,J,{gbox:K,
jqm:e.jqModal,overlay:e.overlay,toTop:e.toTop,modal:e.modal})}y("afterShowForm",a(m));!0===e.closeOnEscape&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+x(u.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(n,R,c,p,k,d,e){"object"===typeof n&&(e=d,d=k,k=p,p=c,c=R,R=n,n=void 0);p=p||{};c=c||{};e=e||{};k=k||{};d=d||{};return this.each(function(){var h=this,m=h.p,t=a(h);if(h.grid&&null!=m&&!(h.nav&&0<a(n).find(".navtable").length)){var f=m.id,g=a.extend({edit:!0,add:!0,
del:!0,search:!0,refresh:!0,refreshstate:"firstpage",view:!1,closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},A.getGridRes.call(t,"nav"),q.nav||{},m.navOptions||{},R||{});g.position=g.position||("rtl"===m.direction?"right":"left");var r,u=m.idSel,J=m.gBox,K=g.commonIconClass,b={themodal:"alertmod_"+f,modalhead:"alerthd_"+f,modalcontent:"alertcnt_"+
f},y=function(){return function(){var c=document.documentElement,d=window,e=1024,f=768,k=t.closest(".ui-jqgrid").offset();void 0===a("#"+x(b.themodal))[0]&&(g.alerttop||g.alertleft||(void 0!==d.innerWidth?(e=d.innerWidth,f=d.innerHeight):null!=c&&void 0!==c.clientWidth&&0!==c.clientWidth&&(e=c.clientWidth,f=c.clientHeight),e=e/2-parseInt(g.alertwidth,10)/2-k.left,f=f/2-25-k.top),q.createModal.call(h,b,"<div class='"+C.call(h,"dialog.body")+"'><div>"+g.alerttext+"</div></div>",{gbox:J,jqModal:g.jqModal,
drag:!0,resize:!0,caption:g.alertcap,top:null!=g.alerttop?g.alerttop:f,left:null!=g.alertleft?g.alertleft:e,width:g.alertwidth,height:g.alertheight,closeOnEscape:g.closeOnEscape,zIndex:g.alertzIndex,removemodal:g.removemodal},m.gView,a(J)[0],!1));q.viewModal.call(h,"#"+x(b.themodal),{gbox:J,toTop:g.alertToTop,jqm:g.jqModal});var l=a("#"+x(b.modalhead)).find(".ui-jqdialog-titlebar-close");l.attr({tabindex:"0",href:"#",role:"button"});setTimeout(function(){l.focus()},50)}}(),F,H=function(b){if(13===
b.which&&(b=a(this).find(".ui-pg-button").filter(":focus"),0<b.length)){var c=b[0].id,c=c.substr(0,0<a(this).closest(".ui-jqgrid-toppager").length?c.length-f.length-5:c.length-f.length-1)+"mod"+m.id,d=a(".ui-jqdialog").filter(":visible").map(function(){return this.id});if(0>a.inArray(c,d))return b.trigger("click"),!1}},D=O.call(h,"hover"),v=O.call(h,"disabled"),I=C.call(h,"navButton","ui-pg-button");if(h.grid){h.modalAlert=y;void 0===n&&(m.pager?(n=m.pager,m.toppager&&(g.cloneToTop=!0)):m.toppager&&
(n=m.toppager));var B=1,L,E,N,P,U,l,aa=["left","center","right"],G="<div class='"+C.call(h,"navButton","ui-pg-button "+O.call(h,"disabled"))+"'><span class='ui-separator'></span></div>",z=function(){T(this,v)||a(this).addClass(D)},S=function(){a(this).removeClass(D)},ga=function(){T(this,v)||(a.isFunction(g.addfunc)?g.addfunc.call(h,p):A.editGridRow.call(t,"new",p));return!1},Y=function(b,c,d){if(!T(this,v)){var e=m.selrow;e?a.isFunction(b)?b.call(h,e,d):A[c].call(t,e,d):y()}return!1},ca=function(){return Y.call(this,
g.editfunc,"editGridRow",c)},V=function(){return Y.call(this,g.viewfunc,"viewGridRow",e)},da=function(){var b;T(this,v)||(m.multiselect?(b=m.selarrrow,0===b.length&&(b=null)):b=m.selrow,b?a.isFunction(g.delfunc)?g.delfunc.call(h,b,k):A.delGridRow.call(t,b,k):y());return!1},fa=function(){T(this,v)||(a.isFunction(g.searchfunc)?g.searchfunc.call(h,d):A.searchGrid.call(t,d));return!1},W=function(){if(!T(this,v)){a.isFunction(g.beforeRefresh)&&g.beforeRefresh.call(h);m.search=!1;m.resetsearch=!0;try{if("currentfilter"!==
g.refreshstate){m.postData.filters="";try{a("#fbox_"+u).jqFilter("resetFilter")}catch(M){}a.isFunction(h.clearToolbar)&&h.clearToolbar(!1)}}catch(M){}switch(g.refreshstate){case "firstpage":t.trigger("reloadGrid",[a.extend({},g.reloadGridOptions||{},{page:1})]);break;case "current":case "currentfilter":t.trigger("reloadGrid",[a.extend({},g.reloadGridOptions||{},{current:!0})])}a.isFunction(g.afterRefresh)&&g.afterRefresh.call(h)}return!1},X=function(b,c,d){var e=a("<div class='"+I+"' tabindex='0' role='button'></div>"),
f=g[b+"icon"],h=a.trim(g[b+"text"]);e.append("<div class='ui-pg-div'><span class='"+(g.iconsOverText?Q("ui-pg-button-icon-over-text",K,f):Q(K,f))+"'></span>"+(h?"<span class='ui-pg-button-text"+(g.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+h+"</span>":"")+"</div>");a(F).append(e);e.attr({title:g[b+"title"]||"",id:c||b+"_"+N}).click(d).hover(z,S);return e};g.cloneToTop&&m.toppager&&(B=2);for(L=0;L<B;L++){F=a("<div class='ui-pg-table navtable' role='toolbar' style='float:"+("rtl"===m.direction?
"right":"left")+";table-layout:auto;'></div>");0===L?(E=n,N=f,E===m.toppager&&(N+="_top",B=1)):(E=m.toppager,N=f+"_top");g.add&&X("add",p.id,ga);g.edit&&X("edit",c.id,ca);g.view&&X("view",e.id,V);g.del&&X("del",k.id,da);(g.add||g.edit||g.del||g.view)&&a(F).append(G);g.search&&(r=X("search",d.id,fa),d.showOnLoad&&!0===d.showOnLoad&&a(r,F).click());g.refresh&&X("refresh","",W);r=a(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px";a("body").append("<div id='testpg2' class='"+C.call(h,"gBox","ui-jqgrid")+
"' style='font-size:"+r+";visibility:hidden;' ></div>");r=a(F).clone().appendTo("#testpg2").width();a("#testpg2").remove();a(E+"_"+g.position,E).append(F);if(g.hideEmptyPagerParts)for(P=0;P<aa.length;P++)aa[P]!==g.position&&(l=a(E+"_"+aa[P],E),0===l.length||0===l[0].childNodes.length?l.hide():1===l[0].childNodes.length&&(U=l[0].firstChild,!a(U).is("table.ui-pg-table")||0!==U.rows&&0!==U.rows[0].cells.length||l.hide()));m._nvtd&&(r>m._nvtd[0]&&(a(E+"_"+g.position,E).width(r),m._nvtd[0]=r),m._nvtd[1]=
r);h.nav=!0;F.on("keydown.jqGrid",H)}t.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(n,R){"object"===typeof n&&(R=n,n=void 0);return this.each(function(){var c=this,p=c.p;if(c.grid){var k=a.extend({caption:"newButton",title:"",onClickButton:null,position:"last",iconsOverText:!1},A.getGridRes.call(a(c),"nav"),q.nav||{},p.navOptions||{},R||{}),d=k.id,e=O.call(c,"hover"),h=O.call(c,"disabled"),m=C.call(c,"navButton","ui-pg-button");if(void 0===n)if(p.pager)if(A.navButtonAdd.call(a(c),
p.pager,k),p.toppager)n=p.toppager,d&&(d+="_top");else return;else p.toppager&&(n=p.toppager);"string"===typeof n&&0!==n.indexOf("#")&&(n="#"+x(n));var p=a(".navtable",n),t=k.commonIconClass;if(0<p.length&&!(d&&0<p.find("#"+x(d)).length)){var f=a("<div tabindex='0' role='button'></div>");"NONE"===k.buttonicon.toString().toUpperCase()?a(f).addClass(m).append("<div class='ui-pg-div'>"+(k.caption?"<span class='ui-pg-button-text"+(k.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+k.caption+"</span>":
"")+"</div>"):a(f).addClass(m).append("<div class='ui-pg-div'><span class='"+(k.iconsOverText?Q("ui-pg-button-icon-over-text",t,k.buttonicon):Q(t,k.buttonicon))+"'></span>"+(k.caption?"<span class='ui-pg-button-text"+(k.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+k.caption+"</span>":"")+"</div>");d&&a(f).attr("id",d);"first"===k.position&&0<p.children("div.ui-pg-button").length?p.children("div.ui-pg-button").first().before(f):p.append(f);a(f,p).attr("title",k.title||"").click(function(d){T(this,
h)||a.isFunction(k.onClickButton)&&k.onClickButton.call(c,k,d);return!1}).hover(function(){T(this,h)||a(this).addClass(e)},function(){a(this).removeClass(e)});a(c).triggerHandler("jqGridResetFrozenHeights")}}})},navSeparatorAdd:function(n,q){q=a.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},q||{});return this.each(function(){if(this.grid){var c=this.p,p=C.call(this,"navButton","ui-pg-button "+O.call(this,"disabled"));if(void 0===n)if(c.pager)if(A.navSeparatorAdd.call(a(this),c.pager,
q),c.toppager)n=c.toppager;else return;else c.toppager&&(n=c.toppager);"string"===typeof n&&0!==n.indexOf("#")&&(n="#"+x(n));c=a(".navtable",n);0<c.length&&(p="<div class='"+p+"'><span class='"+q.sepclass+"'></span>"+q.sepcontent+"</div>","first"===q.position?0===c.children("div.ui-pg-button").length?c.append(p):c.children("div.ui-pg-button").first().before(p):c.append(p))}})},GridToForm:function(n,q){return this.each(function(){var c,p,k,d;if(this.grid){var e=A.getRowData.call(a(this),n);if(e)for(c in e)if(e.hasOwnProperty(c))if(p=
a("[name="+x(c)+"]",q),p.is("input:radio")||p.is("input:checkbox"))for(k=0;k<p.length;k++)d=a(p[k]),d.prop("checked",d.val()===String(e[c]));else p.val(da(e[c])?"":e[c])}})},FormToGrid:function(n,q,c,p){return this.each(function(){if(this.grid){c||(c="set");p||(p="first");var k=a(q).serializeArray(),d={};a.each(k,function(a,c){d[c.name]=c.value});"add"===c?A.addRowData.call(a(this),n,d,p):"set"===c&&A.setRowData.call(a(this),n,d)}})}})});
//# sourceMappingURL=grid.formedit.map
