var $jscomp={scope:{},findInternal:function(a,k,e){a instanceof String&&(a=String(a));for(var f=a.length,g=0;g<f;g++){var p=a[g];if(k.call(e,p,g,a))return{i:g,v:p}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,k,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[k]=e.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,k,e,f){if(k){e=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var g=a[f];g in e||(e[g]={});e=e[g]}a=a[a.length-1];f=e[a];k=k(f);k!=f&&null!=k&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:k})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6-impl","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){var k=a.jgrid,e=k.jqID,f=a.fn.jqGrid,g=function(){var d=a.makeArray(arguments);d[0]="subGrid"+d[0].charAt(0).toUpperCase()+d[0].substring(1);d.unshift("");d.unshift("");d.unshift(this.p);return k.feedback.apply(this,d)},p=function(d,k){return this.each(function(){if(this.grid&&null!=d&&!0===this.p.subGrid){var c=a(this).jqGrid("getInd",d,!0);
a(c).find(">td."+k).trigger("click")}})};k.extend({setSubGrid:function(){return this.each(function(){var d=this.p,f=a(this),c=d.subGridModel[0],b=function(a){return f.jqGrid("getIconRes",a)};d.subGridOptions=a.extend({commonIconClass:b("subgrid.common"),plusicon:b("subgrid.plus"),minusicon:b("subgrid.minus"),openicon:"rtl"===d.direction?b("subgrid.openRtl"):b("subgrid.openLtr"),expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},d.subGridOptions||{});d.colNames.unshift("");
d.colModel.unshift({name:"subgrid",width:k.cell_width?d.subGridWidth+d.cellLayout:d.subGridWidth,labelClasses:"jqgh_subgrid",sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0,frozen:!0});if(c)for(c.align=a.extend([],c.align||[]),d=0;d<c.name.length;d++)c.align[d]=c.align[d]||"left"})},addSubGridCell:function(d,e,c,b){var l=this[0],g=l.p.subGridOptions;c=a.isFunction(g.hasSubgrid)?g.hasSubgrid.call(l,{rowid:c,iRow:e,iCol:d,data:b}):!0;return null==l.p?"":"<td role='gridcell' class='"+f.getGuiStyles.call(this,
"subgrid.tdStart",c?"ui-sgcollapsed sgcollapsed":"")+"' "+l.formatCol(d,e)+">"+(c?"<div class='"+f.getGuiStyles.call(this,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+f.getGuiStyles.call(this,"subgrid.button","sgbutton")+"'><span class='"+k.mergeCssClasses(g.commonIconClass,g.plusicon)+"'></span></a></div>":"&nbsp;")+"</td>"},addSubGrid:function(d,p){return this.each(function(){var c=this,b=c.p,l=b.subGridModel[0],r=function(a,b){return f.getGuiStyles.call(c,"subgrid."+a,b||"")},
B=r("thSubgrid","ui-th-subgrid ui-th-column ui-th-"+b.direction),A=r("rowSubTable","ui-subtblcell"),C=r("row","ui-subgrid ui-row-"+b.direction),D=r("tdWithIcon","subgrid-cell"),E=r("tdData","subgrid-data"),t=function(b,c,d){d=l.align[d];c=a("<td"+(d?" style='text-align:"+d+";'":"")+"></td>").html(c);b.append(c)},x=function(c,d){var h=b.xmlReader.subgrid;a(h.root+" "+h.row,c).each(function(){var b,c,k=a("<tr class='"+A+"'></tr>");if(!0===h.repeatitems)a(h.cell,this).each(function(b){t(k,a(this).text()||
"&#160;",b)});else if(b=l.mapping||l.name)for(c=0;c<b.length;c++)t(k,a(b[c],this).text()||"&#160;",c);d.append(k)})},y=function(c,d){var h,u,m,e,f,n=b.jsonReader.subgrid,g=k.getAccessor(c,n.root);if(null!=g)for(u=0;u<g.length;u++){f=g[u];h=a("<tr class='"+A+"'></tr>");if(!0===n.repeatitems)for(n.cell&&(f=f[n.cell]),m=0;m<f.length;m++)t(h,f[m]||"&#160;",m);else if(e=l.mapping||l.name,e.length)for(m=0;m<e.length;m++)t(h,f[e[m]]||"&#160;",m);d.append(h)}},v=function(d,f,k){var h,m;h=r("legacyTable",
"ui-jqgrid-legacy-subgrid"+(!0===b.altRows&&a(c).jqGrid("isBootstrapGuiStyle")?" table-striped":""));var g=a("<table"+(h?" style='width:1px' role='presentation' class='"+h+"'":"")+"><thead></thead><tbody></tbody></table>"),n=a("<tr></tr>");c.grid.endReq.call(c);for(m=0;m<l.name.length;m++)h=a("<th class='"+B+"'></th>").html(l.name[m]).width(l.width[m]),n.append(h);n.appendTo(g[0].tHead);k(d,a(g[0].tBodies[0]));a("#"+e(b.id+"_"+f)).append(g);return!1},F=function(d){var f=a(d).attr("id"),h={nd_:(new Date).getTime()},
e,g;h[b.prmNames.subgridid]=f;if(!l)return!1;if(l.params)for(g=0;g<l.params.length;g++)e=b.iColByName[l.params[g]],void 0!==e&&(h[b.colModel[e].name]=a(d.cells[e]).text().replace(/\&#160\;/ig,""));if(!c.grid.hDiv.loading)switch(c.grid.beginReq.call(c),b.subgridtype||(b.subgridtype=b.datatype),a.isFunction(b.subgridtype)?b.subgridtype.call(c,h):b.subgridtype=b.subgridtype.toLowerCase(),b.subgridtype){case "xml":case "json":a.ajax(a.extend({type:b.mtype,url:a.isFunction(b.subGridUrl)?b.subGridUrl.call(c,
h):b.subGridUrl,dataType:b.subgridtype,context:f,data:k.serializeFeedback.call(c,b.serializeSubGridData,"jqGridSerializeSubGridData",h),success:function(a){v(a,this,"xml"===b.subgridtype?x:y)},error:function(d,f,e){var g=void 0===b.loadSubgridError?b.loadError:b.loadSubgridError;c.grid.endReq.call(c);a.isFunction(g)&&g.call(c,d,f,e);b.subGridOptions.noEmptySubgridOnError||v(null,this,"xml"===b.subgridtype?x:y)}},k.ajaxOptions,b.ajaxSubgridOptions||{}))}return!1},G=function(){var e=a(this).parent("tr")[0],
n=e.nextSibling,h=e.id,l=b.id+"_"+h,m=function(a){return k.mergeCssClasses(b.subGridOptions.commonIconClass,b.subGridOptions[a])},p=1;a.each(b.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||p++});if(a(this).hasClass("sgcollapsed")){if(!0===b.subGridOptions.reloadOnExpand||!1===b.subGridOptions.reloadOnExpand&&!a(n).hasClass("ui-subgrid")){n=1<=d?"<td colspan='"+d+"'>&#160;</td>":"";if(!g.call(c,"beforeExpand",l,h))return;a(e).after("<tr role='row' class='"+C+"'>"+n+"<td class='"+
D+"'><span class='"+m("openicon")+"'></span></td><td colspan='"+parseInt(b.colNames.length-p,10)+"' class='"+E+"'><div id='"+l+"' class='tablediv'></div></td></tr>");a(c).triggerHandler("jqGridSubGridRowExpanded",[l,h]);a.isFunction(b.subGridRowExpanded)?b.subGridRowExpanded.call(c,l,h):F(e)}else a(n).show();a(this).html("<div class='"+f.getGuiStyles.call(c,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+f.getGuiStyles.call(c,"subgrid.button","sgbutton")+"'><span class='"+m("minusicon")+
"'></span></a></div>").removeClass("sgcollapsed").addClass("sgexpanded");b.subGridOptions.selectOnExpand&&a(c).jqGrid("setSelection",h)}else if(a(this).hasClass("sgexpanded")){if(!g.call(c,"beforeCollapse",l,h))return;!0===b.subGridOptions.reloadOnExpand?a(n).remove(".ui-subgrid"):a(n).hasClass("ui-subgrid")&&a(n).hide();a(this).html("<div class='"+f.getGuiStyles.call(c,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+f.getGuiStyles.call(c,"subgrid.button","sgbutton")+"'><span class='"+
m("plusicon")+"'></span></a></div>").removeClass("sgexpanded").addClass("sgcollapsed");b.subGridOptions.selectOnCollapse&&a(c).jqGrid("setSelection",h)}return!1},z,q,w=1;if(c.grid){z=c.rows.length;void 0!==p&&0<p&&(w=p,z=p+1);for(;w<z;)q=c.rows[w],a(q).hasClass("jqgrow")&&(q=a(q.cells[d]),q.hasClass("ui-sgcollapsed")&&(b.scroll&&q.off("click"),q.on("click",G))),w++;!0===b.subGridOptions.expandOnLoad&&a(c.rows).filter(".jqgrow").each(function(b,c){a(c.cells[0]).click()});c.subGridXml=function(a,b){return v(a,
b,x)};c.subGridJson=function(a,b){return v(a,b,y)}}})},expandSubGridRow:function(a){return p.call(this,a,"sgcollapsed")},collapseSubGridRow:function(a){return p.call(this,a,"sgexpanded")},toggleSubGridRow:function(a){return p.call(this,a,"ui-sgcollapsed")}})});
//# sourceMappingURL=grid.subgrid.map
